# Default values for papermc

# -- Image configuration
image:
  repository: lexfrei/papermc
  pullPolicy: IfNotPresent
  # -- Overrides the image tag whose default is the chart appVersion
  tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

# -- Port configuration
ports:
  # -- Minecraft server ports (TCP and UDP)
  minecraft:
    tcp: 25565
    udp: 25565

  # -- Additional ports for plugins (e.g., DynMap, BlueMap, etc.)
  # Each port will be exposed in both the Pod and Service
  # @default -- `[]`
  extra: []
  # Examples:
  # - name: dynmap
  #   port: 8123
  #   protocol: TCP
  # - name: bluemap
  #   port: 8100
  #   protocol: TCP

# -- Service configuration
service:
  # -- Service type
  type: LoadBalancer
  # -- Service annotations (e.g., for LoadBalancer IP assignment)
  annotations: {}
    # io.cilium/lb-ipam-ips: "172.16.100.253"
    # metallb.io/address-pool: minecraft-pool
  # -- External traffic policy (Cluster or Local). Only for LoadBalancer/NodePort.
  # Local preserves client source IP but may cause uneven traffic distribution.
  externalTrafficPolicy: ""

# -- Ingress configuration for web interfaces (e.g., DynMap)
# Provides full control over the Ingress spec for maximum flexibility
ingress:
  enabled: false
  # -- Full Ingress spec (excluding metadata)
  # The service name will be auto-injected as the chart fullname
  # @default -- `{}`
  spec: {}
  # Example configuration:
  # spec:
  #   ingressClassName: nginx
  #   tls:
  #     - secretName: map-tls
  #       hosts:
  #         - map.example.com
  #   rules:
  #     - host: map.example.com
  #       http:
  #         paths:
  #           - path: /
  #             pathType: Prefix
  #             backend:
  #               service:
  #                 name: papermc  # Will be auto-replaced with chart fullname
  #                 port:
  #                   name: dynmap

# -- HTTPRoute configuration (Gateway API) for web interfaces
# Provides full control over the HTTPRoute spec for maximum flexibility
httpRoute:
  enabled: false
  # -- Full HTTPRoute spec (excluding metadata)
  # The service name will be auto-injected as the chart fullname
  # @default -- `{}`
  spec: {}
  # Example configuration:
  # spec:
  #   parentRefs:
  #     - name: cilium-gateway
  #       namespace: kube-system
  #       sectionName: https
  #   hostnames:
  #     - map.example.com
  #   rules:
  #     - matches:
  #         - path:
  #             type: PathPrefix
  #             value: /
  #       backendRefs:
  #         - name: papermc  # Will be auto-replaced with chart fullname
  #           port: 8123

# -- Persistence configuration
persistence:
  enabled: true
  # -- Storage class name for PVC
  storageClassName: ""
  # -- Access mode for PVC
  accessMode: ReadWriteOnce
  # -- Size of the PVC
  size: 30Gi
  # -- Use an existing PVC
  existingClaim: ""

# -- Resource limits and requests
resources:
  requests:
    memory: "4Gi"
    cpu: "1000m"
  limits:
    memory: "4Gi"
    cpu: "2000m"

# -- Liveness probe configuration
livenessProbe:
  enabled: true
  tcpSocket:
    port: minecraft-tcp
  initialDelaySeconds: 60
  periodSeconds: 15

# -- Readiness probe configuration
readinessProbe:
  enabled: true
  tcpSocket:
    port: minecraft-tcp
  initialDelaySeconds: 30
  periodSeconds: 10

# -- Node selector for pod assignment
nodeSelector: {}

# -- Tolerations for pod assignment
tolerations: []

# -- Affinity for pod assignment
affinity: {}
# Example for specific node:
# nodeAffinity:
#   requiredDuringSchedulingIgnoredDuringExecution:
#     nodeSelectorTerms:
#       - matchExpressions:
#           - key: kubernetes.io/hostname
#             operator: In
#             values:
#               - mc

# -- Pod annotations
podAnnotations: {}

# -- Pod labels
podLabels: {}

# -- Security context for the pod
podSecurityContext: {}
  # fsGroup: 2000

# -- Security context for the container
securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

# -- Update strategy
updateStrategy:
  type: RollingUpdate
